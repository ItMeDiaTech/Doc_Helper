<Window x:Class="Doc_Helper.UI.Views.Dialogs.SettingsDialog"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:ui="http://schemas.modernwpf.com/2019"
        Title="Settings" Height="600" Width="800"
        WindowStartupLocation="CenterOwner"
        ResizeMode="CanResize">
    <ui:SimpleStackPanel Margin="20" Spacing="15">
        <TextBlock Text="Application Settings" FontSize="24" FontWeight="Bold" />

        <TabControl>
            <TabItem Header="General">
                <ui:SimpleStackPanel Spacing="10" Margin="20">
                    <TextBlock Text="Theme" FontWeight="SemiBold" />
                    <ComboBox SelectedItem="{Binding Theme}" Width="200" HorizontalAlignment="Left">
                        <ComboBoxItem Content="Light" />
                        <ComboBoxItem Content="Dark" />
                        <ComboBoxItem Content="System" />
                    </ComboBox>

                    <CheckBox Content="Show progress details" IsChecked="{Binding ShowProgressDetails}" />
                    <CheckBox Content="Auto-select first file" IsChecked="{Binding AutoSelectFirstFile}" />
                    <CheckBox Content="Remember window position" IsChecked="{Binding RememberWindowPosition}" />
                    <CheckBox Content="Confirm on exit" IsChecked="{Binding ConfirmOnExit}" />
                    <CheckBox Content="Show tooltips" IsChecked="{Binding ShowToolTips}" />
                    <CheckBox Content="Minimize to tray" IsChecked="{Binding MinimizeToTray}" />
                    <CheckBox Content="Show status bar" IsChecked="{Binding ShowStatusBar}" />
                </ui:SimpleStackPanel>
            </TabItem>

            <TabItem Header="Processing">
                <ui:SimpleStackPanel Spacing="10" Margin="20">
                    <TextBlock Text="Document Processing Options" FontWeight="SemiBold" />
                    <CheckBox Content="Fix source hyperlinks" IsChecked="{Binding FixSourceHyperlinks}" />
                    <CheckBox Content="Append content ID" IsChecked="{Binding AppendContentID}" />
                    <CheckBox Content="Check title changes" IsChecked="{Binding CheckTitleChanges}" />
                    <CheckBox Content="Fix titles" IsChecked="{Binding FixTitles}" />
                    <CheckBox Content="Fix internal hyperlinks" IsChecked="{Binding FixInternalHyperlink}" />
                    <CheckBox Content="Fix double spaces" IsChecked="{Binding FixDoubleSpaces}" />
                    <CheckBox Content="Replace hyperlinks" IsChecked="{Binding ReplaceHyperlink}" />
                    <CheckBox Content="Replace text" IsChecked="{Binding ReplaceText}" />
                    <CheckBox Content="Open changelog after updates" IsChecked="{Binding OpenChangelogAfterUpdates}" />
                </ui:SimpleStackPanel>
            </TabItem>
            
            <TabItem Header="Backup">
                <ui:SimpleStackPanel Spacing="10" Margin="20">
                    <TextBlock Text="Backup Configuration" FontWeight="SemiBold" />
                    
                    <CheckBox Content="Enable automatic backup before processing" IsChecked="{Binding EnableAutoBackup}" />
                    <CheckBox Content="Use centralized backup location" IsChecked="{Binding UseCentralizedBackups}" IsEnabled="{Binding EnableAutoBackup}" />
                    <CheckBox Content="Enable undo/restore functionality" IsChecked="{Binding EnableUndo}" />
                    <CheckBox Content="Auto-cleanup old backups" IsChecked="{Binding AutoCleanupBackups}" />
                    
                    <TextBlock Text="Backup retention (days):" />
                    <ui:NumberBox Value="{Binding BackupRetentionDays}" Minimum="1" Maximum="365" Width="100" HorizontalAlignment="Left" />
                    
                    <TextBlock Text="Backup folder name:" />
                    <TextBox Text="{Binding BackupFolderName}" Width="200" HorizontalAlignment="Left" />
                    
                    <TextBlock Text="Backup root path (empty = user documents):" />
                    <TextBox Text="{Binding BackupRootPath}" Width="400" HorizontalAlignment="Left" />
                </ui:SimpleStackPanel>
            </TabItem>

            <TabItem Header="API">
                <ui:SimpleStackPanel Spacing="10" Margin="20">
                    <TextBlock Text="API Configuration" FontWeight="SemiBold" />

                    <TextBlock Text="Power Automate Flow URL:" />
                    <TextBox Text="{Binding PowerAutomateFlowUrl}" Width="400" HorizontalAlignment="Left" />

                    <TextBlock Text="Hyperlink Base URL:" />
                    <TextBox Text="{Binding HyperlinkBaseUrl}" Width="400" HorizontalAlignment="Left" />

                    <TextBlock Text="Timeout (seconds):" />
                    <ui:NumberBox Value="{Binding TimeoutSeconds}" Minimum="5" Maximum="300" Width="100" HorizontalAlignment="Left" />
                </ui:SimpleStackPanel>
            </TabItem>

            <TabItem Header="Changelog">
                <ui:SimpleStackPanel Spacing="10" Margin="20">
                    <TextBlock Text="Changelog Configuration" FontWeight="SemiBold" />
                    
                    <CheckBox Content="Auto-open changelog after processing" IsChecked="{Binding AutoOpenChangelog}" />
                    <CheckBox Content="Save changelog to downloads folder" IsChecked="{Binding SaveChangelogToDownloads}" />
                    <CheckBox Content="Show individual document changelogs" IsChecked="{Binding ShowIndividualChangelogs}" />
                    <CheckBox Content="Enable changelog export" IsChecked="{Binding EnableChangelogExport}" />
                </ui:SimpleStackPanel>
            </TabItem>
            
            <TabItem Header="Data">
                <ui:SimpleStackPanel Spacing="10" Margin="20">
                    <TextBlock Text="Data Configuration" FontWeight="SemiBold" />

                    <TextBlock Text="Connection String:" />
                    <TextBox Text="{Binding ConnectionString}" Width="400" HorizontalAlignment="Left" />

                    <CheckBox Content="Enable database logging" IsChecked="{Binding EnableDatabaseLogging}" />
                    <CheckBox Content="Enable data compression" IsChecked="{Binding EnableCompression}" />
                    <CheckBox Content="Auto-migrate database on startup" IsChecked="{Binding AutoMigrateDatabase}" />

                    <TextBlock Text="Cache expiration (minutes):" />
                    <ui:NumberBox Value="{Binding CacheExpirationMinutes}" Minimum="1" Maximum="1440" Width="100" HorizontalAlignment="Left" />
                    
                    <TextBlock Text="Max cache size (MB):" />
                    <ui:NumberBox Value="{Binding MaxCacheSizeMB}" Minimum="10" Maximum="1000" Width="100" HorizontalAlignment="Left" />
                </ui:SimpleStackPanel>
            </TabItem>
        </TabControl>

        <StackPanel Orientation="Horizontal" HorizontalAlignment="Right" Margin="0,20,0,0">
            <Button Content="Reset to Defaults" Command="{Binding ResetToDefaultsCommand}" Margin="0,0,10,0" />
            <Button Content="Cancel" Command="{Binding CancelCommand}" Margin="0,0,10,0" />
            <Button Content="Save" Command="{Binding SaveCommand}" Style="{StaticResource AccentButtonStyle}" />
        </StackPanel>
    </ui:SimpleStackPanel>
</Window>